import{d as J,r as $,k as Q,e as h,w as T,f as Z,g as he,o as ge,a as me,c as y,n as ee,_ as we,q as F,s as V,t as W,C as q,F as pe,y as _e,x as Ee,D as Ae}from"./index-a3d33809.js";import{c as te,t as D,a as G,r as O,s as xe,h as ae,v as ye,b as Be,x as K,y as k,p as be,z as Ce,A as Te,B as U,w as ie,C as Se}from"./use-expose-f3a0ac33.js";import{u as De,o as ke}from"./use-touch-82c3d06d.js";const[ne,P]=te("swipe"),Pe={loop:D,width:G,height:G,vertical:Boolean,autoplay:O(0),duration:O(500),touchable:D,lazyRender:Boolean,initialSwipe:O(0),indicatorColor:String,showIndicators:D,stopPropagation:D},le=Symbol(ne);var $e=J({name:ne,props:Pe,emits:["change","dragStart","dragEnd"],setup(a,{emit:m,slots:g}){const c=$(),d=$(),e=Q({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let w=!1;const s=De(),{children:p,linkChildren:r}=xe(le),i=h(()=>p.length),o=h(()=>e[a.vertical?"height":"width"]),v=h(()=>a.vertical?s.deltaY.value:s.deltaX.value),E=h(()=>e.rect?(a.vertical?e.rect.height:e.rect.width)-o.value*i.value:0),z=h(()=>o.value?Math.ceil(Math.abs(E.value)/o.value):i.value),I=h(()=>i.value*o.value),A=h(()=>(e.active+i.value)%i.value),R=h(()=>{const t=a.vertical?"vertical":"horizontal";return s.direction.value===t}),se=h(()=>{const t={transitionDuration:`${e.swiping?0:a.duration}ms`,transform:`translate${a.vertical?"Y":"X"}(${+e.offset.toFixed(2)}px)`};if(o.value){const l=a.vertical?"height":"width",n=a.vertical?"width":"height";t[l]=`${I.value}px`,t[n]=a[n]?`${a[n]}px`:""}return t}),oe=t=>{const{active:l}=e;return t?a.loop?U(l+t,-1,i.value):U(l+t,0,z.value):l},j=(t,l=0)=>{let n=t*o.value;a.loop||(n=Math.min(n,-E.value));let f=l-n;return a.loop||(f=U(f,E.value,0)),f},_=({pace:t=0,offset:l=0,emitChange:n})=>{if(i.value<=1)return;const{active:f}=e,u=oe(t),C=j(u,l);if(a.loop){if(p[0]&&C!==E.value){const M=C<E.value;p[0].setOffset(M?I.value:0)}if(p[i.value-1]&&C!==0){const M=C>0;p[i.value-1].setOffset(M?-I.value:0)}}e.active=u,e.offset=C,n&&u!==f&&m("change",A.value)},S=()=>{e.swiping=!0,e.active<=-1?_({pace:i.value}):e.active>=i.value&&_({pace:-i.value})},ce=()=>{S(),s.reset(),k(()=>{e.swiping=!1,_({pace:-1,emitChange:!0})})},L=()=>{S(),s.reset(),k(()=>{e.swiping=!1,_({pace:1,emitChange:!0})})};let Y;const B=()=>clearTimeout(Y),b=()=>{B(),+a.autoplay>0&&i.value>1&&(Y=setTimeout(()=>{L(),b()},+a.autoplay))},x=(t=+a.initialSwipe)=>{if(!c.value)return;const l=()=>{var n,f;if(!K(c)){const u={width:c.value.offsetWidth,height:c.value.offsetHeight};e.rect=u,e.width=+((n=a.width)!=null?n:u.width),e.height=+((f=a.height)!=null?f:u.height)}i.value&&(t=Math.min(i.value-1,t),t===-1&&(t=i.value-1)),e.active=t,e.swiping=!0,e.offset=j(t),p.forEach(u=>{u.setOffset(0)}),b()};K(c)?ee().then(l):l()},N=()=>x(e.active);let X;const re=t=>{!a.touchable||t.touches.length>1||(s.start(t),w=!1,X=Date.now(),B(),S())},ue=t=>{a.touchable&&e.swiping&&(s.move(t),R.value&&(!a.loop&&(e.active===0&&v.value>0||e.active===i.value-1&&v.value<0)||(be(t,a.stopPropagation),_({offset:v.value}),w||(m("dragStart",{index:A.value}),w=!0))))},H=()=>{if(!a.touchable||!e.swiping)return;const t=Date.now()-X,l=v.value/t;if((Math.abs(l)>.25||Math.abs(v.value)>o.value/2)&&R.value){const f=a.vertical?s.offsetY.value:s.offsetX.value;let u=0;a.loop?u=f>0?v.value>0?-1:1:0:u=-Math[v.value>0?"ceil":"floor"](v.value/o.value),_({pace:u,emitChange:!0})}else v.value&&_({pace:0});w=!1,e.swiping=!1,m("dragEnd",{index:A.value}),b()},ve=(t,l={})=>{S(),s.reset(),k(()=>{let n;a.loop&&t===i.value?n=e.active===0?0:t:n=t%i.value,l.immediate?k(()=>{e.swiping=!1}):e.swiping=!1,_({pace:n-e.active,emitChange:!0})})},fe=(t,l)=>{const n=l===A.value,f=n?{backgroundColor:a.indicatorColor}:void 0;return y("i",{style:f,class:P("indicator",{active:n})},null)},de=()=>{if(g.indicator)return g.indicator({active:A.value,total:i.value});if(a.showIndicators&&i.value>1)return y("div",{class:P("indicators",{vertical:a.vertical})},[Array(i.value).fill("").map(fe)])};return ae({prev:ce,next:L,state:e,resize:N,swipeTo:ve}),r({size:o,props:a,count:i,activeIndicator:A}),T(()=>a.initialSwipe,t=>x(+t)),T(i,()=>x(e.active)),T(()=>a.autoplay,b),T([Ce,Te,()=>a.width,()=>a.height],N),T(ye(),t=>{t==="visible"?b():B()}),Z(x),he(()=>x(e.active)),ke(()=>x(e.active)),ge(B),me(B),Be("touchmove",ue,{target:d}),()=>{var t;return y("div",{ref:c,class:P()},[y("div",{ref:d,style:se.value,class:P("track",{vertical:a.vertical}),onTouchstartPassive:re,onTouchend:H,onTouchcancel:H},[(t=g.default)==null?void 0:t.call(g)]),de()])}}});const ze=ie($e),[Ie,Me]=te("swipe-item");var Fe=J({name:Ie,setup(a,{slots:m}){let g;const c=Q({offset:0,inited:!1,mounted:!1}),{parent:d,index:e}=Se(le);if(!d)return;const w=h(()=>{const r={},{vertical:i}=d.props;return d.size.value&&(r[i?"height":"width"]=`${d.size.value}px`),c.offset&&(r.transform=`translate${i?"Y":"X"}(${c.offset}px)`),r}),s=h(()=>{const{loop:r,lazyRender:i}=d.props;if(!i||g)return!0;if(!c.mounted)return!1;const o=d.activeIndicator.value,v=d.count.value-1,E=o===0&&r?v:o-1,z=o===v&&r?0:o+1;return g=e.value===o||e.value===E||e.value===z,g}),p=r=>{c.offset=r};return Z(()=>{ee(()=>{c.mounted=!0})}),ae({setOffset:p}),()=>{var r;return y("div",{class:Me(),style:w.value},[s.value?(r=m.default)==null?void 0:r.call(m):null])}}});const Oe=ie(Fe);const Ue={class:"welfare"},Re={class:"banner"},je=["src"],Le={__name:"index",setup(a){const m=$([]);m.value=[{id:1,imgUrl:"http://serviceimg.bmcc.com.cn/weixin/style/welfareArea/upload/202301121113341%E9%A1%B6%E9%83%A8%E8%BD%AE%E6%92%AD670_260.jpg",url:""},{id:2,imgUrl:"http://serviceimg.bmcc.com.cn/weixin/style/welfareArea/upload/202308111424461%E7%A6%8F%E5%88%A9%E4%B8%93%E5%8C%BA-%E8%BD%AE%E6%92%AD670-260.jpg",url:""}];const g=$([]);return g.value=[{title:"热门活动",list:[{imgUrl:"http://serviceimg.bmcc.com.cn/weixin/style/welfareArea/upload/202309211704041634_200.png",url:""},{imgUrl:"http://serviceimg.bmcc.com.cn/weixin/style/welfareArea/upload/202208011731051%E5%97%A8%E8%B4%AD40GB%E7%A6%8F%E5%88%A9%E4%B8%93%E5%8C%BA.jpg",url:""},{imgUrl:"http://serviceimg.bmcc.com.cn/weixin/style/welfareArea/upload/202308111425191%E7%A6%8F%E5%88%A9%E4%B8%93%E5%8C%BA-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%93%E4%BA%AB634-200.jpg",url:""}]},{title:"手厅专享",list:[{imgUrl:"http://serviceimg.bmcc.com.cn/weixin/style/welfareArea/upload/202109021857061%E6%89%8B%E5%8E%85%E7%AD%BE%E5%88%B0.jpg",url:""}]}],(c,d)=>{const e=Oe,w=ze;return F(),V("div",Ue,[W("div",Re,[y(w,{loop:!1,width:502,"show-indicators":!1},{default:q(()=>[(F(!0),V(pe,null,_e(Ee(m),s=>(F(),Ae(e,{key:s.id},{default:q(()=>[W("img",{src:s.imgUrl,alt:""},null,8,je)]),_:2},1024))),128))]),_:1})])])}}},He=we(Le,[["__scopeId","data-v-73575d19"]]);export{He as default};
